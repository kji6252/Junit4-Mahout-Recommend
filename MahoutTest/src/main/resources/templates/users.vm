<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hello Millky</title>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>
<body ng-app="stockApp" ng-controller="stockCtrl">
<section>
선택된거 : {{ selectName }}
</section>
<section>
<ul>
  <li ng-repeat="x in names">
    <span ng-click="ajaxSubmit(x.userInfo.id,x.userInfo.name)">{{ x }}</span>
  </li>
</ul>
</section>
<section>
<p>Type a letter in the input field:</p>
<p>
<form novalidate>
<input type="text" ng-model="test">
<button ng-click="reset()">RESET</button>
</form>
</p>
</section>
<aside style="height:500px;overflow-y:scroll;border-top:1px solid #e5e5e5">
<ul>
  <li ng-repeat="x in stocks | filter:test track by x.name">
    <span ng-click="ajaxSubmit(x.id,x.name);">{{ x.name }}</span>
  </li>
</ul>
</aside>
<script>
var stockApp = angular.module('stockApp', []);
stockApp.controller('stockCtrl', function($scope, $http) {
	 $http.get("/allUserInfo")
    .then(function(response) {
        $scope.stocks = response.data;
    });
    $scope.seleteId=0;
	$scope.ajaxSubmit =  function(data, data2) {
		console.log(data)
		 $http.get("/userInfo", {params: {id: data}})
    	.then(function(response) {
        $scope.names = response.data;
        $scope.selectName = data2;
    }, function (){alert('데이터가 없습니다.');});
 	};
 	
    $scope.reset = function() {
        $scope.test = angular.copy('');
    };
});
</script>
</body>
</html>